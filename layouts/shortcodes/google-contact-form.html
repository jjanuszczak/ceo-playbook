{{ $action := .Get "action" }}
{{ $nameID := .Get "nameID" }}
{{ $emailID := .Get "emailID" }}
{{ $msgID := .Get "msgID" }}
{{ $submitText := .Get "submitText" }}

<div class="w-full p-6 bg-neutral-100 dark:bg-neutral-800 rounded-xl shadow-sm border border-neutral-200 dark:border-neutral-700 relative">

  <div id="form-success" class="hidden text-center py-10">
    <div class="text-2xl mb-2">âœ…</div>
    <h3 class="text-xl font-bold text-neutral-800 dark:text-neutral-200">Message Sent!</h3>
    <p class="text-neutral-600 dark:text-neutral-400">Thank you for reaching out.</p>
  </div>

  <form id="google-form" 
        action="{{ $action }}" 
        method="POST" 
        target="hidden_iframe" 
        class="w-full flex flex-col gap-4"
        onsubmit="document.getElementById('google-form').classList.add('hidden'); document.getElementById('form-success').classList.remove('hidden');">
    
    <label class="flex flex-col gap-2 w-full">
      <span class="text-sm font-semibold text-neutral-700 dark:text-neutral-300">Name</span>
      <input type="text" name="{{ $nameID }}" required 
             class="w-full px-4 py-2 rounded-md border 
                    bg-white dark:bg-neutral-700 
                    text-neutral-900 dark:text-white 
                    border-neutral-300 dark:border-neutral-600 
                    placeholder-neutral-400 dark:placeholder-neutral-400
                    focus:outline-none focus:ring-2 focus:ring-primary-500 focus:border-transparent" 
             placeholder="John Doe" />
    </label>

    <label class="flex flex-col gap-2 w-full">
      <span class="text-sm font-semibold text-neutral-700 dark:text-neutral-300">Email</span>
      <input type="email" name="{{ $emailID }}" required 
             class="w-full px-4 py-2 rounded-md border 
                    bg-white dark:bg-neutral-700 
                    text-neutral-900 dark:text-white 
                    border-neutral-300 dark:border-neutral-600 
                    placeholder-neutral-400 dark:placeholder-neutral-400
                    focus:outline-none focus:ring-2 focus:ring-primary-500 focus:border-transparent" 
             placeholder="john@example.com" />
    </label>

    <label class="flex flex-col gap-2 w-full">
      <span class="text-sm font-semibold text-neutral-700 dark:text-neutral-300">Message</span>
      <textarea name="{{ $msgID }}" rows="4" required
                class="w-full px-4 py-2 rounded-md border 
                       bg-white dark:bg-neutral-700 
                       text-neutral-900 dark:text-white 
                       border-neutral-300 dark:border-neutral-600 
                       placeholder-neutral-400 dark:placeholder-neutral-400
                       focus:outline-none focus:ring-2 focus:ring-primary-500 focus:border-transparent" 
                placeholder="How can I help you?"></textarea>
    </label>

    <button type="submit" 
            class="mt-2 px-6 py-2 bg-primary-600 hover:bg-primary-700 text-white font-bold rounded-md transition-colors duration-200">
      {{ $submitText }}
    </button>
  </form>
</div>

<iframe name="hidden_iframe" id="hidden_iframe" style="display:none;"></iframe>